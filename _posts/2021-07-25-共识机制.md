# 区块链共识机制

由于加密货币多数采用去中心化的区块链设计，节点是各处分散且平行的，所以必须设计一套制度，来维护系统的运作顺序与公平性，统一区块链的版本，并奖励提供资源维护区块链的使用者，以及惩罚恶意的危害者。这样的制度，必须依赖某种方式来证明，是由谁取得了一个区块链的打包权（或称记账权），并且可以获取打包这一个区块的奖励；又或者是谁意图进行危害，就会获得一定的惩罚，这就是共识机制。

## PoW 工作量证明

代表：比特币

一般要求用户进行一些耗时适当的复杂运算，并且答案能被服务方快速验算，以此耗用的时间、设备与能源做为担保成本，以确保服务与资源是被真正的需求所使用。

由于加密货币多由区块链所建构，而区块链本来就要依赖散列函数来做为资料正确无误的担保，所以在加密货币上使用工作量证明，是非常简明的设计。由分散在各处的计算机，竞赛谁能最早找出，搭配原本要打包的资料的穷举猜测值（nonce），谁就等同获得该区块的打包权（记账权）。此猜测值被找出后，与资料、散列值一起打包成块后广播，经多数节点确认与承认，打包者就能获得打包该区块所提供的奖励。[3]一般采用工作量证明的加密货币，好比比特币，会设置成随着参与竞赛的算力增减，而调整找寻猜测值的难度，以维持合理的运作速度。

- 优点
  - 架构简明扼要、有效可靠。
  - 由于要获得多数节点承认，那攻击者必须投入超过总体一半的运算量（51%攻击），才能保证篡改结果。这使得攻击成功的成本变得非常高昂，难以实现。
  - 某种程度上是公平的，你投入越多的算力，你获得打包权的几率也等比增加。
- 缺点
  - 非常浪费能源。投入在一种加密货币上的能源，可能会超过一个小型国家的总使用量。
  - 由于加密货币在世界上已成为一种投资标的，所以技术人员开发出了由ASIC组成的特制计算设备（矿机），垄断算力。这与加密货币的去中心化思想背道而驰。
    - 也因此，后期开发的加密货币有针对抗ASIC的算法设计，例如以太坊采用的Ethash（Dagger-Hashimoto）算法。
    - 后期开发的加密货币陆续使用了POS机制（例如以太坊）或DPOS机制（例如比特股﹑EOS）。

从长远来看，POW不太适合作为共识机制。

## PoS 权益证明

代表：以太坊

权益证明的问题是，大多数的持币人没有足够的专业知识或足够的预算，无法达到高性能节点所需的计算机硬件和软件要求，难以产生区块，因此持币量大的少数账户便能支配区块的生成，获取大部分的奖励。

代理持有量证明（又称代理权益证明，英语：Delegated Proof of Stake或DPOS）的出现旨在解决以上的问题。DPOS与POS原理相同，主要分别在于每位持币人有权投票选出代理节点，由得票最多的若干节点负责生成区块。DPOS引入了民主机制，持币量少的人亦能参与投票，决定之后能生成区块获取奖励的节点，以实现去中心化的目的。

- 优点：通过缩小选举节点的数量，能够在不增加计算资源的前提下有效减少网络压力。
- 缺点：选举固定数量的节点未必能完全实现去中心化；如参选的节点数量少或者投票人数低，选出的节点代点代表性不足。

## DPoS 股份授权证明

代表：EOS

## Proof-of-Spacetime (PoSt) 时空证明

代表：filecoin

用空间保持的时间作为算力，获得打包权从而出块。
